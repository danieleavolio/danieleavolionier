<!DOCTYPE html>

<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width" />
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="icon" href="/favicon.png" /> 
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="manifest" href="/site.webmanifest">	
		<link href="../_app/immutable/assets/0.fd9c2f0b.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Modal.37c0f23c.css" rel="stylesheet">
		<link href="../_app/immutable/assets/7.7d3bdd3e.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Author.931a7c92.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Tag.3905ac6a.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Grading.67c6c54f.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.d653323f.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.38e9bcec.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.463c135b.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/control.c2cf8273.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.5f3e46ea.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.a4192956.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.fa6e9378.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.ed560a20.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/config.2fe9a967.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/spread.8a54911c.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Icon.723a6cc1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/each.ae5ef580.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.0d0aa15e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/navigation.97470e07.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Modal.b484dbeb.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/7.2e847d83.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/dynamic-import-helper.be004503.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Author.cdc96255.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/SEO.cd6d6e35.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores.37955c7d.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Tag.dad8f434.js"><title>Come implementare un motore di ricerca in SvelteKit</title><!-- HEAD_svelte-4hwe27_START --><meta name="description" content="Cercare all'interno del proprio sito web potrebbe essere necessario per rendere piÃ¹ facile la navigazione ai propri utenti. Wow in SvelteKit non Ã¨ poi cosi difficile!"><meta property="og:title" content="Come implementare un motore di ricerca in SvelteKit"><meta property="og:description" content="Cercare all'interno del proprio sito web potrebbe essere necessario per rendere piÃ¹ facile la navigazione ai propri utenti. Wow in SvelteKit non Ã¨ poi cosi difficile!"><meta property="og:type" content="article"><meta property="og:url" content="http://sveltekit-prerender/pagine/implementare-search-engine-sveltekit"><meta property="og:image" content="https://i.imgur.com/juSgfgF.png"><meta name="twitter:image" content="https://i.imgur.com/juSgfgF.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Come implementare un motore di ricerca in SvelteKit"><meta name="twitter:description" content="Cercare all'interno del proprio sito web potrebbe essere necessario per rendere piÃ¹ facile la navigazione ai propri utenti. Wow in SvelteKit non Ã¨ poi cosi difficile!"> <!-- HTML_TAG_START -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "Article",
			"mainEntityOfPage": {
				"@type": "WebPage",
				"@id": "http://sveltekit-prerender/pagine/implementare-search-engine-sveltekit"
				},
			"headline": "Come implementare un motore di ricerca in SvelteKit",
			"image": ["https://i.imgur.com/juSgfgF.png"],
			"author": {
				"@type": "Person",
				"name": "Daniele Avolio"
				},
			"publisher": {
				"@type": "Organization",
				"name": "Daniele Avolio Blog",
				"logo": {
					"@type": "ImageObject",
					"url": "https://i.imgur.com/HjK8Wmp.png"
					}
				},
			"description": "Cercare all'interno del proprio sito web potrebbe essere necessario per rendere piÃ¹ facile la navigazione ai propri utenti. Wow in SvelteKit non Ã¨ poi cosi difficile!",
			"articleBody": "Cercare all'interno del proprio sito web potrebbe essere necessario per rendere piÃ¹ facile la navigazione ai propri utenti. Wow in SvelteKit non Ã¨ poi cosi difficile!"
		}
		</script>
		<!-- HTML_TAG_END --><!-- HEAD_svelte-4hwe27_END -->
	<meta name="google-site-verification" content="FTolVaK-x02wu54OEQqZv2yP7npBnNRQtI6mSv8W4RQ" />
</head>

<body data-sveltekit-preload-data="hover">
	<div style="display: contents">  <div class="layout svelte-1bmlo4o"> <nav class="svelte-1chnx4l"><div class="nav-div svelte-1chnx4l">  <div class="home svelte-1chnx4l"><svg xmlns="http://www.w3.org/2000/svg" width="2.5em" height="2.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" cursor="pointer" fill-opacity="0" class="lucide-icon lucide lucide-home "><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></div> <div class="search-icon svelte-16w6dnk"><button class="svelte-16w6dnk" data-svelte-h="svelte-7udims"><span class="material-symbols-outlined svelte-16w6dnk">search</span></button></div>  <dialog class="svelte-9sq2pw search" this="0"> <div class="internal svelte-9sq2pw">     <a autofocus class="svelte-9sq2pw" data-svelte-h="svelte-1xniscw">CHIUDI</a></div> </dialog>  <div class="button-hamburger svelte-1chnx4l"><svg xmlns="http://www.w3.org/2000/svg" width="2.5em" height="2.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" class="lucide-icon lucide lucide-settings "><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg></div></div></nav>  <main class="svelte-1bmlo4o"><div class="transition svelte-vcdv4c">  <article class="svelte-1w6do65"> <hgroup class="review-banner svelte-1w6do65"><h1 class="svelte-1w6do65">Come implementare un motore di ricerca in SvelteKit</h1> <h3 class="svelte-1w6do65">Cercare all'interno del proprio sito web potrebbe essere necessario per rendere piÃ¹ facile la navigazione ai propri utenti. Wow in SvelteKit non Ã¨ poi cosi difficile!</h3> <p class="svelte-1w6do65">Data: 18 ott 2024</p> </hgroup>  <div class="tags svelte-1w6do65"><button class="tag  svelte-1y8qrki">PROGRAMMAZIONE</button><button class="tag  svelte-1y8qrki">WEB</button><button class="tag  svelte-1y8qrki">BLOG</button><button class="tag  svelte-1y8qrki">SVELTEKIT</button></div>  <div class="prose svelte-1w6do65"><p data-svelte-h="svelte-637rrv"><code>Premessa</code>: Questo articolo Ã¨ stato scritto dopo aver implementato dopo aver seguito la seguente guida: <a href="https://joyofcode.xyz/blazing-fast-sveltekit-search" rel="nofollow">How To Make A Blazing Fast SvelteKit Search</a>. Questo articolo Ã¨ una traduzione e riadattamento di quanto scritto in quella guida, dopo averlo applicato al mio sito web.</p> <img src="https://i.imgur.com/LviXblo.gif" alt="Motore di ricerca" loading="lazy"> <center data-svelte-h="svelte-5ka0th">Esempio di motore di ricerca in SvelteKit</center> <h2 id="dipendenze" data-svelte-h="svelte-slg7eu">Dipendenze</h2> <p data-svelte-h="svelte-1bajpca">Per implementare un motore di ricerca in SvelteKit, avremo bisogno di unâ€™unica <strong>dipendenza</strong>: <code>flexsearch</code>. Questa libreria sarÃ  quella che ci permetterÃ  di effettuare la ricerca allâ€™interno del nostro sito web in base al contenuto dei nostri articoli o pagine.</p> <!-- HTML_TAG_START --><pre class="shiki one-dark-pro" style="background-color: #282c34" tabindex="0"><code><span class="line"><span style="color: #61AFEF">npm</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">install</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">flexsearch</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="struttura-del-filesystem" data-svelte-h="svelte-1iztq0e">Struttura del filesystem</h2> <p data-svelte-h="svelte-hnzk0d">La struttura che ci serve per far funzionare il motore di ricerca Ã¨ la seguente:</p> <!-- HTML_TAG_START --><pre class="shiki one-dark-pro" style="background-color: #282c34" tabindex="0"><code><span class="line"><span style="color: #abb2bf">src/</span></span>
<span class="line"><span style="color: #abb2bf">â”œâ”€â”€ lib/</span></span>
<span class="line"><span style="color: #abb2bf">â”‚   â””â”€â”€ search.ts</span></span>
<span class="line"><span style="color: #abb2bf">â””â”€â”€ routes/</span></span>
<span class="line"><span style="color: #abb2bf">    â”œâ”€â”€ search.json/</span></span>
<span class="line"><span style="color: #abb2bf">    â”‚   â””â”€â”€ +server.ts</span></span>
<span class="line"><span style="color: #abb2bf">    â””â”€â”€ +page.svelte</span></span></code></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-cq93wm">Dove:</p> <ul data-svelte-h="svelte-135f4xc"><li><code>search.ts</code> Ã¨ il file che conterrÃ  lâ€™<strong>index</strong> e la <strong>funzione di ricerca</strong>.</li> <li><code>search.json</code> Ã¨ un <strong>endpoint</strong> che ci servirÃ  per pre-renderizzare i risultati della ricerca come un <code>json</code>, e questo ci permetterÃ  di evitare di salvarci un file <code>json</code> manualmente.</li> <li><code>+page.svelte</code> Ã¨ la pagina che conterrÃ  il nostro motore di ricerca, poi potete farlo comparire dove volete.</li></ul> <h2 id="implementazione" data-svelte-h="svelte-z1k6wg">Implementazione</h2> <h4 id="searchts" data-svelte-h="svelte-u7xz6t"><code>search.ts</code></h4> <!-- HTML_TAG_START --><pre class="shiki one-dark-pro" style="background-color: #282c34" tabindex="0"><code><span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">type</span><span style="color: #ABB2BF"> &#123; </span><span style="color: #E06C75">Element</span><span style="color: #ABB2BF"> &#125; </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;$lib/types&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> &#123; </span><span style="color: #E06C75">json</span><span style="color: #ABB2BF"> &#125; </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;@sveltejs/kit&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">prerender</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">true</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">async</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">GET</span><span style="color: #ABB2BF">(&#123;</span><span style="color: #E06C75; font-style: italic">fetch</span><span style="color: #ABB2BF">&#125;) &#123;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Fetch dei post</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">fetch</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;api/posts&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">posts</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">Element</span><span style="color: #ABB2BF">[] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">json</span><span style="color: #ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Aggiunta poichÃ© ho 2 tipi di pagine</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">posts</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">forEach</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">post</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">post</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">slug</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;pagine/&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">post</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">slug</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">    &#125;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Fetch dei progetti</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">res2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">fetch</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;api/progetti&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">progetti</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">Element</span><span style="color: #ABB2BF">[] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">res2</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">json</span><span style="color: #ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">progetti</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">forEach</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">post</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">post</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">slug</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;progetti/&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">post</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">slug</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">    &#125;);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Ritorno dei dati come JSON</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">json</span><span style="color: #ABB2BF">(&#123; </span><span style="color: #E06C75">posts</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">progetti</span><span style="color: #ABB2BF">&#125;);</span></span>
<span class="line"><span style="color: #ABB2BF">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-i8m19m"><code>Nota</code>: Io ho giÃ  un endpoint che mi ritorna tutti i post e i progetti, quindi ho usato quello. Se non avete un endpoint simile, potete creare un file <code>api/posts.ts</code> e <code>api/progetti.ts</code> che ritornano i post e i progetti, poichÃ© i miei file che contengono i post sono in <strong>markdown</strong> e sono salvati proprio come file <code>.md</code>, non li prendo da nessuna API esterna.</p> <h4 id="searchjson" data-svelte-h="svelte-njjvyj"><code>search.json</code></h4> <!-- HTML_TAG_START --><pre class="shiki one-dark-pro" style="background-color: #282c34" tabindex="0"><code><span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">FlexSearch</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;flexsearch&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">type</span><span style="color: #ABB2BF"> &#123; </span><span style="color: #E06C75">Element</span><span style="color: #ABB2BF"> &#125; </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;$lib/types&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">postsIndex</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">FlexSearch</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Index</span></span>
<span class="line"><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">posts</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">Element</span><span style="color: #ABB2BF">[]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createIndex</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">data</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">any</span><span style="color: #ABB2BF">) &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Crea un indice di ricerca per i post</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Tokenize &#39;forward&#39; per accettare anche le ricerche parziali</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// mentre per le ricerche esatte si puÃ² usare &#39;strict&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">postsIndex</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">FlexSearch</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">Index</span><span style="color: #ABB2BF">(&#123; </span><span style="color: #E06C75">tokenize</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;forward&#39;</span><span style="color: #ABB2BF"> &#125;)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Join perchÃ© ho sia i post che i progetti</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">data</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">posts</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">concat</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">progetti</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">forEach</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">post</span><span style="color: #ABB2BF">: &#123; </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">any</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">description</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">any</span><span style="color: #ABB2BF">; &#125;, </span><span style="color: #E06C75; font-style: italic">i</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">FlexSearch</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Id</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// Crea un item con il titolo e la descrizione del post</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">item</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#96;</span><span style="color: #C678DD">$&#123;</span><span style="color: #E5C07B">post</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">title</span><span style="color: #C678DD">&#125;</span><span style="color: #98C379"> </span><span style="color: #C678DD">$&#123;</span><span style="color: #E5C07B">post</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">description</span><span style="color: #C678DD">&#125;</span><span style="color: #98C379">&#96;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// Aggiungi l&#39;item all&#39;indice</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">postsIndex</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">item</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    &#125;)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">posts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">data</span></span>
<span class="line"><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">searchPostsIndex</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">searchTerm</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">string</span><span style="color: #ABB2BF">) &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// escape special regex characters</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">match</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">searchTerm</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">replace</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">/</span><span style="color: #D19A66">[</span><span style="color: #E06C75">.</span><span style="color: #D19A66">*+?^$&#123;&#125;()|[</span><span style="color: #56B6C2">]\</span><span style="color: #D19A66">]</span><span style="color: #E06C75">/</span><span style="color: #C678DD">g</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;</span><span style="color: #56B6C2">\</span><span style="color: #98C379">$&amp;&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// return matching post indexes ðŸ’ª</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">results</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">postsIndex</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">search</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">match</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">results</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// filter the posts based on the matched index</span></span>
<span class="line"><span style="color: #ABB2BF">        .</span><span style="color: #61AFEF">map</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">index</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">posts</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">index</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">as</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">number</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// you can do whatever you want at this point ðŸ‘Œ</span></span>
<span class="line"><span style="color: #ABB2BF">        .</span><span style="color: #61AFEF">map</span><span style="color: #ABB2BF">((&#123; </span><span style="color: #E06C75; font-style: italic">slug</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">title</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">description</span><span style="color: #ABB2BF"> &#125;) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E06C75">slug</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic">// replace match in title with a marker</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">replaceTextWithMarker</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">match</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic">// match words in post and replace matches with marker</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E06C75">content</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">getMatches</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">description</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">match</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            &#125;</span></span>
<span class="line"><span style="color: #ABB2BF">        &#125;)</span></span>
<span class="line"><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">getMatches</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">text</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">string</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">searchTerm</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">string</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">limit</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Regex per la ricerca</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">regex</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">RegExp</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">searchTerm</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;gi&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Indici</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">indexes</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Matches</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">matches</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Loop per trovare i match</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">match</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">while</span><span style="color: #ABB2BF"> ((</span><span style="color: #E06C75">match</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">regex</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">exec</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">text</span><span style="color: #ABB2BF">)) </span><span style="color: #56B6C2">!==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">matches</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&lt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">limit</span><span style="color: #ABB2BF">) &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// Aggiungi l&#39;indice</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">indexes</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">push</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">match</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">index</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// Incrementa i match</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">matches</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    &#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Ritorna l&#39;array di indici</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">indexes</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">map</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">index</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// Vai indietro di 20 caratteri</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">start</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">index</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// Vai avanti di 80 caratteri</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">end</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">index</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">80</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// Estrai il testo</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">excerpt</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">text</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">substring</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">start</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">end</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">trim</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// Ritorna l&#39;estratto con i match</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#96;...</span><span style="color: #C678DD">$&#123;</span><span style="color: #61AFEF">replaceTextWithMarker</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">excerpt</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">searchTerm</span><span style="color: #ABB2BF">)</span><span style="color: #C678DD">&#125;</span><span style="color: #98C379">...&#96;</span></span>
<span class="line"><span style="color: #ABB2BF">    &#125;)</span></span>
<span class="line"><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">replaceTextWithMarker</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">text</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">string</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">match</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">string</span><span style="color: #ABB2BF">) &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Regex per la ricerca</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">regex</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">RegExp</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">match</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;gi&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// Ritorna il testo con il match evidenziato</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">text</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">replaceAll</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">regex</span><span style="color: #ABB2BF">, (</span><span style="color: #E06C75; font-style: italic">match</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#96;&lt;mark&gt;</span><span style="color: #C678DD">$&#123;</span><span style="color: #E06C75">match</span><span style="color: #C678DD">&#125;</span><span style="color: #98C379">&lt;/mark&gt;&#96;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-18lfjfd">Praticamente, quello che succede Ã¨ che:</p> <ol data-svelte-h="svelte-15cpnaf"><li>Creiamo un indice di ricerca per i post e i progetti.</li> <li>Creiamo una funzione che ci permette di cercare allâ€™interno dellâ€™indice.</li> <li>Creiamo una funzione che ci permette di evidenziare i match allâ€™interno del testo.</li> <li>Creiamo una funzione che ci permette di ottenere i match allâ€™interno del testo.</li> <li>Ritorniamo i risultati.</li></ol> <h4 id="componente-di-ricerca" data-svelte-h="svelte-1awkkkl"><code>Componente di ricerca</code></h4> <!-- HTML_TAG_START --><pre class="shiki one-dark-pro" style="background-color: #282c34" tabindex="0"><code><span class="line"><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">lang</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;ts&quot;</span><span style="color: #56B6C2">&gt;</span><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> &#123; </span><span style="color: #E06C75">createIndex</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">searchPostsIndex</span><span style="color: #ABB2BF"> &#125; </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;$lib/search&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> &#123; </span><span style="color: #E06C75">onMount</span><span style="color: #ABB2BF"> &#125; </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;svelte&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> &#123; </span><span style="color: #E06C75">fade</span><span style="color: #ABB2BF"> &#125; </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;svelte/transition&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Modal</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;./Modal.svelte&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> &#123; </span><span style="color: #E06C75">goto</span><span style="color: #ABB2BF"> &#125; </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;$app/navigation&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">search</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;loading&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">searchTerm</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">results</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [];</span></span>
<span class="line"><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">showModal</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">dialog</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #61AFEF">onMount</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">async</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">posts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">fetch</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;/search.json&quot;</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">then</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">res</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">res</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">json</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">createIndex</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">posts</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">search</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;ready&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">&#125;);</span></span>
<span class="line"><span style="color: #E06C75">$</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">search</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;ready&quot;</span><span style="color: #ABB2BF">) &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">results</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">searchPostsIndex</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">searchTerm</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  &#125;</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;search-icon&quot;</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">on</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75">click</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">&#123;() =&gt; (</span><span style="color: #E06C75">showModal</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">!</span><span style="color: #E06C75">showModal</span><span style="color: #ABB2BF">)&#125;</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;material-symbols-outlined&quot;</span><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">search</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">button</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">Modal</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">bind</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75">dialog</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">&#123;</span><span style="color: #E06C75">dialog</span><span style="color: #ABB2BF">&#125; </span><span style="color: #E06C75">bind</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75">showModal</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">isSearch</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">&#123;</span><span style="color: #E06C75">true</span><span style="color: #ABB2BF">&#125;</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#123;#</span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">search</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;ready&#39;</span><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;search&quot;</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">			</span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">input</span></span>
<span class="line"><span style="color: #ABB2BF">				</span><span style="color: #E06C75">bind</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">&#123;</span><span style="color: #E06C75">searchTerm</span><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">				</span><span style="color: #E06C75">placeholder</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Cerca...&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">				</span><span style="color: #E06C75">autocomplete</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;off&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">				</span><span style="color: #E06C75">spellcheck</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;false&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">				</span><span style="color: #E06C75">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;search&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">			</span><span style="color: #56B6C2">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">			</span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;results&quot;</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">				&#123;#</span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">results</span><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">					&lt;</span><span style="color: #E5C07B">ul</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">						&#123;#</span><span style="color: #E06C75">each</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">results</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">as</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">result</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">result</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">slug</span><span style="color: #ABB2BF">)&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">							</span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">div</span></span>
<span class="line"><span style="color: #ABB2BF">								</span><span style="color: #E06C75">on</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75">click</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">&#123;() =&gt; &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">									</span><span style="color: #C678DD">goto</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;/&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">result</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">slug</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">									</span><span style="color: #E06C75">showModal</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">									</span><span style="color: #E06C75">searchTerm</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">									</span><span style="color: #E5C07B">dialog</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">close</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">								&#125;&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">								</span><span style="color: #E06C75">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;link&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">								</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75">fade</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">&#123;&#123;</span></span>
<span class="line"><span style="color: #ABB2BF">									</span><span style="color: #E06C75">duration</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">								&#125;&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">							</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">								&lt;</span><span style="color: #E5C07B">h3</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">									&#123;@</span><span style="color: #E06C75">html</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">result</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">								</span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">h3</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">								&lt;</span><span style="color: #E5C07B">p</span><span style="color: #ABB2BF">&gt;&#123;@html result.</span><span style="color: #E06C75">content</span><span style="color: #ABB2BF">&#125;</span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">p</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">							</span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">						&#123;</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">each</span><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">					</span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">ul</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">				&#123;</span><span style="color: #56B6C2">/</span><span style="color: #C678DD">if</span><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">			</span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#123;</span><span style="color: #56B6C2">/</span><span style="color: #C678DD">if</span><span style="color: #ABB2BF">&#125;</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">Modal</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	.</span><span style="color: #E06C75">search</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">padding</span><span style="color: #ABB2BF">: 1</span><span style="color: #E06C75">em</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	.</span><span style="color: #E06C75">search</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">icon</span><span style="color: #ABB2BF">&#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">transform</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">translateY</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	@</span><span style="color: #61AFEF">media</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">min</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">width</span><span style="color: #ABB2BF">: 1300</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">) &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		.</span><span style="color: #E06C75">search</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">icon</span><span style="color: #ABB2BF">&#123;</span></span>
<span class="line"><span style="color: #ABB2BF">			</span><span style="color: #E06C75">transform</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">translateY</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF">10</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">		&#125;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">background</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataBlackO</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataWhite</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">border</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">none</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">padding</span><span style="color: #ABB2BF">: 0.5</span><span style="color: #E06C75">em</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">cursor</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">pointer</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">border</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">radius</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">100</span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">width</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">100</span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">padding</span><span style="color: #ABB2BF">: 0.5</span><span style="color: #E06C75">em</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">font</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">size</span><span style="color: #ABB2BF">: 1</span><span style="color: #E06C75">em</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">background</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataBlackO</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataWhite</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E06C75">h3</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">margin</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataWhite</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #7F848E; font-style: italic">/* input placeholder */</span></span>
<span class="line"><span style="color: #ABB2BF">	::</span><span style="color: #E06C75">placeholder</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataWhite</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	.</span><span style="color: #E06C75">results</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">margin</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">top</span><span style="color: #ABB2BF">: 1</span><span style="color: #E06C75">em</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	.</span><span style="color: #E06C75">results</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ul</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">list</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">none</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">padding</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E06C75">ul</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">list</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">none</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">display</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">flex</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">flex</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">direction</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">column</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">gap</span><span style="color: #ABB2BF">: 2</span><span style="color: #E06C75">em</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	.</span><span style="color: #E06C75">link</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">cursor</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">pointer</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">background</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataBlackOpacity</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataWhite</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">padding</span><span style="color: #ABB2BF">: 1</span><span style="color: #E06C75">em</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">background</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF"> 0.3</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	.</span><span style="color: #E06C75">link</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75">hover</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">background</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF">(--</span><span style="color: #E06C75">automataBlackO</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	.</span><span style="color: #E06C75">results</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">p</span><span style="color: #ABB2BF"> &#123;</span></span>
<span class="line"><span style="color: #ABB2BF">		</span><span style="color: #E06C75">margin</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">top</span><span style="color: #ABB2BF">: 0.5</span><span style="color: #E06C75">em</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">	&#125;</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #56B6C2">&gt;</span></span></code></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-58pk0i">Io ho lasciato lo <strong>style</strong> che ho per il mio componente, che non andrÃ  bene per voi, poichÃ© allâ€™interno utilizzo anche un <strong>Modal</strong> per andare a fare la ricerca senza invadere la pagina. Quello che Ã¨ importante Ã¨ la <strong>logica</strong> del motore di ricerca.</p> <p data-svelte-h="svelte-x4riyg">La logica del componente Ã¨ molto semplice:</p> <ol data-svelte-h="svelte-11g9vdr"><li>Quando il componente Ã¨ montato, prendiamo i post dal nostro endpoint e creiamo lâ€™indice di ricerca.</li> <li>Quando il componente Ã¨ pronto, cerchiamo allâ€™interno dellâ€™indice in base alla nostra ricerca.</li> <li>Mostriamo i risultati.</li></ol> <h2 id="conclusioni" data-svelte-h="svelte-jz0v5e">Conclusioni</h2> <p data-svelte-h="svelte-5gswjk">Nel suo articolo <a href="https://joyofcode.xyz/" rel="nofollow">Joy Of Code</a> aggiunge anche una parte utilizzando un <strong>Web Worker</strong> per aumentare le performance del motore di ricerca, ma io non lâ€™ho implementata poichÃ© non ho avuto problemi di performance. Se avete problemi di performance, vi consiglio di dare unâ€™occhiata al suo articolo perchÃ© quÃ¬ per ora non troverete nulla a riguardo.</p> <p data-svelte-h="svelte-19e1foe">Potrebbero anche esserci situazioni inadeguate in cui anche con 1 sola lettera, il motore di ricerca vi ritorna risultati, ma questo Ã¨ dovuto al fatto che io ho voluto fare una ricerca parziale e non esatta. Se volete fare una ricerca esatta, potete cambiare il parametro <code>tokenize</code> allâ€™interno del file <code>search.ts</code> da <code>forward</code> a <code>strict</code> come detto in precedenza.</p> <img src="https://i.imgur.com/Pgfiqwi.png" alt="Risultati ricerca" loading="lazy"> <center data-svelte-h="svelte-di98sc">Risultati della ricerca un po&#39; esagerati</center> <p data-svelte-h="svelte-1e85paa">Attualmente non penso che il motore sia ottimale, perchÃ© io non ho ancora implementato la ricerca per i tag e neanche per contenuto allâ€™interno dei post, perchÃ© non ho ancora rimodellato alcune parti dei dati per essere accessibili senza troppi magheggi. In futuro chissÃ , magari lo implementerÃ² ma sicuramente non Ã¨ ora il momento.</p></div>   <div class="share-buttons svelte-16ny7g4"><button class="twitter-share svelte-16ny7g4" data-svelte-h="svelte-1hc8rlu"><img src="https://simpleicons.org/icons/x.svg" alt="twitter" class="svelte-16ny7g4">Condividi su X</button> <button class="copy-link svelte-16ny7g4" data-svelte-h="svelte-lm8ga5">Copia il link</button></div>   <div class="author svelte-sn0eh6"><div class="name-surname svelte-sn0eh6"><span>Daniele</span> <span class="username svelte-sn0eh6">lovaion</span> <span>Avolio</span></div> <p>Sviluppatore e amante del mondo dei videogiochi ðŸŽ® e della cultura pop giapponese ðŸ—¾</p>   <div class="contacts svelte-wk71a5">  <img src="https://simpleicons.org/icons/linkedin.svg" alt="LinkedIn" class="icon svelte-wk71a5"> <img src="https://simpleicons.org/icons/x.svg" alt="x" class="icon svelte-wk71a5"> <img src="https://simpleicons.org/icons/github.svg" alt="GitHub" class="icon svelte-wk71a5"> </div> </div> </article></div></main> <footer class="svelte-k2ae0s"><p class="svelte-k2ae0s">Daniele Avolio Â© 2024</p> </footer> </div> 
			
			<script>
				{
					__sveltekit_1143gwq = {
						base: new URL("..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../_app/immutable/entry/start.d653323f.js"),
						import("../_app/immutable/entry/app.5f3e46ea.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 7],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
</body>

</html>